---
layout: default
lang: jp
nav_link: コマンドパラメーター
nav_level: 2
nav_order: 40
---


# コマンドパラメーター

---

[前のセクション](configuring_user_sync_tool.md)  \| [次のセクション](usage_scenarios.md)

---
構成ファイルをセットアップした後、User Sync はコマンドラインまたはスクリプトで実行できます。ツールを実行するには、コマンドシェルまたはスクリプトで、次のコマンドを実行します。

`user-sync` \[ _optional parameters_ \]

ツールでは、様々な場面において特定の動作を指定するオプションのパラメーターを使用できます。


| パラメーターと引数の仕様&nbsp;&nbsp;&nbsp; | 説明 |
|------------------------------|------------------|
| `-h`<br />`--help` | ヘルプメッセージを表示して終了します。 |
| `-v`<br />`--version` | プログラムのバージョン番号を表示して終了します。 |
| `-t`<br />`--test-mode` | API アクション呼び出しをテストモードで実行します（変更は実行されません）。実行されたはずのものをログに記録します。 |
| `-c` _filename_<br />`--config-filename` _filename_ | メインの構成ファイルへの完全パス（作業用フォルダーに対する絶対パスまたは相対パス）。デフォルトのファイル名は「user-sync-config.yml」 |
| `--users` `all`<br />`--users` `file` _input_path_<br />`--users` `group` _grp1,grp2_<br />`--users` `mapped` | 同期で選択するユーザーを指定します。デフォルトでは `all`、つまりディレクトリにあるすべてのユーザーです。`file` を指定すると、引数で指定した CSV ファイルから入力ユーザー仕様を取得します。`group` を指定すると、引数をエンタープライズディレクトリにあるグループのコンマ区切りリストとして解釈し、そのグループ内のユーザーのみが選択されます。`mapped` は `group` を指定するのと同じで、構成ファイルのグループマッピングにすべてのグループがリストされています。これは、マッピングされたグループのユーザーだけを同期する場合に、非常に一般的なケースです。|
| `--user-filter` _regex\_pattern_ | 正規表現で指定したパターンに一致するものに同期するときに確認するユーザーセットを制限します。Python で正規表現を構築する方法について詳しくは、[Python の正規表現ドキュメント](https://docs.python.org/2/library/re.html)を参照してください。ユーザー名は正規表現と完全に一致する必要があります。|
| `--update-user-info` | 指定した場合は、ユーザー情報を同期します。エンタープライズディレクトリ側とアドビ側とで情報が異なる場合は、アドビ側が一致するようにアップデートされます。これには、firstname と lastname フィールドが含まれます。 |
| `--process-groups` | 指定した場合、グループメンバーシップ情報が同期されます。エンタープライズディレクトリ側とアドビ側とでマッピングされたグループのメンバーシップが異なる場合は、一致するようにアドビ側のグループメンバーシップがアップデートされます。これには、ディレクトリ側にリストされていないアドビユーザーのグループメンバーシップを取り除くことが含まれます（`--adobe-only-user-action exclude` オプションが選択されている場合は例外) |
| `--adobe-only-user-action preserve`<br />`--adobe-only-user-action remove-adobe-groups`<br />`--adobe-only-user-action  remove`<br />`--adobe-only-user-action delete`<br /><br/>`--adobe-only-user-action  write-file`&nbsp;filename<br/><br/>`--adobe-only-user-action  exclude` | 指定した場合、アドビ側にあるユーザーアカウントがディレクトリに含まれていないなら、指定されたアクションを実行します。<br/><br/>`preserve`：アカウントの削除に関する処理はおこなわれません。これはデフォルトです。`--process-groups` オプションが指定されていたなら、グループメンバーシップの変更がまだある可能性があります。<br/><br/>`remove-adobe-groups`：アカウントがユーザーグループおよび製品構成から取り除かれ、保持されていたライセンスは解放されますが、組織内ではアクティブなアカウントとして残されます。<br><br/>`remove`：remove-adobe-groups に加えて、アカウントが組織からも取り除かれますが、ユーザーアカウントとそれに関連するアセットはドメインに残され、必要に応じて組織に再追加できます。<br/><br/>`delete`：取り除くアクションに加えて、組織がドメインを所有する場合はアカウントが削除されます。<br/><br/>`write-file`：アカウントの削除に関するアクションは取られません。アドビ側にあるもののディレクトリにはないユーザーアカウントのリストが、指定されたファイルに書き込まれます。次いで、その後の一連の実行でこのファイルを `--adobe-only-user-list` に渡すことができます。`--process-groups` オプションが指定されていたなら、グループメンバーシップの変更がまだある可能性があります。<br/><br/>`exclude`：アドビ側のみにあるユーザーにはいずれのアップデートも適用されません。これは、ファイル経由（--ユーザーファイル f）で特定のユーザーのみのアップデートをおこなう場合に使用されます。ファイルには明示的なアップデートが必要なユーザーのみがリストされており、他のすべてのユーザーはそのままにされます。<br/><br>許可されているアクションのみが適用されます。adobeID のタイプのアカウントはユーザーが所有するので、削除のアクションは、取り除くに相当します。他の組織が所有するアドビアカウントについても同じです。|
| `--adobe-only-user-list` _filename_ | ユーザーリストの読み取り元となるファイルを指定します。このリストは、操作の対象となる「アドビのみ」のユーザーアカウントの決定的なリストとして使用されます。いずれかの `--adobe-only-user-action` ディレクティブを指定する必要があり、そのアクションはリスト内のユーザーアカウントに適用されます。`--users` オプションは、このオプションがある場合は許可されません。アカウントを取り除くアクションのみが処理されます。 |
| `--config-file-encoding` _encoding_name_ | 省略可能。構成ファイルの内容に応じて文字エンコードを指定します。これには、メインの構成ファイル user-sync-config.yml と、このファイルが参照する可能性のある他の構成ファイルも含まれます。User Sync 2.2 以降の初期設定は `utf8` で、これ以前のバージョンの初期設定は `ascii` です。<br />ユーザーソースデータ（csv または ldap）での文字エンコードはコネクタ構成によって宣言され、そのエンコードは、構成ファイルに使用されるエンコードと異なっていても構いません（例：latin-1 構成ファイルに対して、utf-8 エンコードを使用する CSV ソースファイルを使用できます）。<br />使用できるエンコードは、使用する Python によって異なります。詳しくは、[こちら](https://docs.python.org/2.7/library/codecs.html#standard-encodings)を参照してください。 |
| `--strategy sync`<br />`--strategy push` | リリース 2.2 以降で使用できます。省略可能。初期設定の動作モードは `--strategy sync` です。User Sync が Adobe からユーザー情報を読み取るかどうかを制御し、ディレクトリ情報と比較して、Adobe に更新を発行するか、Adobe の既存のユーザー情報を考慮せずに Adobe にディレクトリ入力を単にプッシュします。`sync` は初期設定で、このドキュメントの大部分の説明の主題です。アドビ側のユーザー数が多い場合（3 万人を超えるなど）、少数のユーザーへの追加または変更があることがわかっている場合は `push` が便利です。これらのユーザーの一覧は csv ファイルまたは特定のディレクトリグループで利用できます。<br />`--strategy push` を指定した場合、アドビ専用のユーザーを特定できないため、`--adobe-only-user-action` を指定することはできません。<br/>`--strategy push` は新しいユーザーを作成し、マップされたグループについてのみグループメンバーシップを変更し（`--process-groups` がある場合）、ユーザー情報を更新します（`--update-user-info` がある場合）。組織からユーザーを削除したり、これらのユーザーのアカウントを削除したりすることはありません。プッシュ通知を使用してユーザーを削除する方法については、[プッシュ通知の処理](usage_scenarios.md#handling-push-notifications)を参照してください。 |
{: .bordertablestyle }

---

[前のセクション](configuring_user_sync_tool.md)  \| [次のセクション](usage_scenarios.md)
